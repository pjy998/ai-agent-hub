name: "Javaä»£ç åˆ†æé…ç½®"
description: "é’ˆå¯¹Javaé¡¹ç›®çš„ç»¼åˆä»£ç åˆ†æé…ç½®ï¼ŒåŒ…å«ä»£ç è´¨é‡ã€å®‰å…¨æ€§å’Œæ€§èƒ½æ£€æŸ¥"
version: "1.0.0"
author: "AI Agent Hub"

# ä¸Šä¸‹æ–‡é…ç½®
context:
  include_files:
    - "**/*.java"
    - "**/pom.xml"
    - "**/build.gradle"
    - "**/application.properties"
    - "**/application.yml"
  exclude_files:
    - "**/target/**"
    - "**/build/**"
    - "**/.git/**"
    - "**/node_modules/**"
  max_file_size: 1048576  # 1MB
  scan_depth: 10

# åˆ†ææ­¥éª¤
steps:
  - name: "é¡¹ç›®ç»“æ„åˆ†æ"
    description: "åˆ†æJavaé¡¹ç›®çš„æ•´ä½“ç»“æ„å’Œæ¶æ„"
    prompt: |
      è¯·åˆ†æè¿™ä¸ªJavaé¡¹ç›®çš„ç»“æ„ï¼ŒåŒ…æ‹¬ï¼š
      1. é¡¹ç›®ç±»å‹ï¼ˆSpring Bootã€Mavenã€Gradleç­‰ï¼‰
      2. åŒ…ç»“æ„å’Œæ¨¡å—åˆ’åˆ†
      3. ä¸»è¦ä¾èµ–å’Œæ¡†æ¶
      4. é…ç½®æ–‡ä»¶åˆ†æ
      
      è¯·æä¾›é¡¹ç›®ç»“æ„çš„æ€»ä½“è¯„ä¼°å’Œæ”¹è¿›å»ºè®®ã€‚
    context:
      include_files:
        - "**/pom.xml"
        - "**/build.gradle"
        - "**/src/main/java/**/*.java"
      max_files: 50

  - name: "ä»£ç è´¨é‡æ£€æŸ¥"
    description: "æ£€æŸ¥Javaä»£ç çš„è´¨é‡å’Œæœ€ä½³å®è·µ"
    prompt: |
      è¯·å¯¹Javaä»£ç è¿›è¡Œè´¨é‡æ£€æŸ¥ï¼Œé‡ç‚¹å…³æ³¨ï¼š
      1. å‘½åè§„èŒƒï¼ˆç±»åã€æ–¹æ³•åã€å˜é‡åï¼‰
      2. ä»£ç å¤æ‚åº¦å’Œå¯è¯»æ€§
      3. è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨
      4. SOLIDåŸåˆ™çš„éµå¾ª
      5. å¼‚å¸¸å¤„ç†æœºåˆ¶
      6. æ³¨é‡Šå’Œæ–‡æ¡£å®Œæ•´æ€§
      
      è¯·ä¸ºæ¯ä¸ªé—®é¢˜æä¾›å…·ä½“çš„ä»£ç ä½ç½®å’Œæ”¹è¿›å»ºè®®ã€‚
    context:
      include_files:
        - "**/src/main/java/**/*.java"
      exclude_files:
        - "**/test/**"
      max_files: 100

  - name: "å®‰å…¨æ€§åˆ†æ"
    description: "æ£€æŸ¥Javaä»£ç ä¸­çš„å®‰å…¨æ¼æ´å’Œé£é™©"
    prompt: |
      è¯·å¯¹Javaä»£ç è¿›è¡Œå®‰å…¨æ€§åˆ†æï¼Œæ£€æŸ¥ä»¥ä¸‹å®‰å…¨é—®é¢˜ï¼š
      1. SQLæ³¨å…¥é£é™©
      2. XSSè·¨ç«™è„šæœ¬æ”»å‡»
      3. æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼ˆå¯†ç ã€APIå¯†é’¥ç­‰ï¼‰
      4. è¾“å…¥éªŒè¯ä¸è¶³
      5. æƒé™æ§åˆ¶ç¼ºé™·
      6. åºåˆ—åŒ–å®‰å…¨é—®é¢˜
      7. ä¾èµ–åº“å®‰å…¨æ¼æ´
      
      è¯·ä¸ºæ¯ä¸ªå®‰å…¨é—®é¢˜æä¾›é£é™©ç­‰çº§å’Œä¿®å¤å»ºè®®ã€‚
    context:
      include_files:
        - "**/src/main/java/**/*.java"
        - "**/application.properties"
        - "**/application.yml"
      max_files: 80

  - name: "æ€§èƒ½ä¼˜åŒ–åˆ†æ"
    description: "åˆ†æJavaä»£ç çš„æ€§èƒ½é—®é¢˜å’Œä¼˜åŒ–æœºä¼š"
    prompt: |
      è¯·åˆ†æJavaä»£ç çš„æ€§èƒ½é—®é¢˜ï¼Œé‡ç‚¹å…³æ³¨ï¼š
      1. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ï¼ˆN+1é—®é¢˜ã€ç´¢å¼•ä½¿ç”¨ç­‰ï¼‰
      2. å†…å­˜ä½¿ç”¨ä¼˜åŒ–ï¼ˆå¯¹è±¡åˆ›å»ºã€ç¼“å­˜ç­–ç•¥ç­‰ï¼‰
      3. å¹¶å‘å¤„ç†ä¼˜åŒ–ï¼ˆçº¿ç¨‹å®‰å…¨ã€é”ä½¿ç”¨ç­‰ï¼‰
      4. ç®—æ³•å¤æ‚åº¦åˆ†æ
      5. I/Oæ“ä½œä¼˜åŒ–
      6. JVMå‚æ•°è°ƒä¼˜å»ºè®®
      
      è¯·ä¸ºæ¯ä¸ªæ€§èƒ½é—®é¢˜æä¾›å…·ä½“çš„ä¼˜åŒ–æ–¹æ¡ˆå’Œé¢„æœŸæ•ˆæœã€‚
    context:
      include_files:
        - "**/src/main/java/**/*.java"
      exclude_files:
        - "**/test/**"
      max_files: 60

  - name: "æµ‹è¯•è¦†ç›–ç‡åˆ†æ"
    description: "åˆ†ææµ‹è¯•ä»£ç çš„è¦†ç›–ç‡å’Œè´¨é‡"
    prompt: |
      è¯·åˆ†æJavaé¡¹ç›®çš„æµ‹è¯•æƒ…å†µï¼š
      1. å•å…ƒæµ‹è¯•è¦†ç›–ç‡
      2. é›†æˆæµ‹è¯•å®Œæ•´æ€§
      3. æµ‹è¯•ä»£ç è´¨é‡
      4. Mockä½¿ç”¨æƒ…å†µ
      5. æµ‹è¯•æ•°æ®ç®¡ç†
      6. æµ‹è¯•è‡ªåŠ¨åŒ–ç¨‹åº¦
      
      è¯·æä¾›æµ‹è¯•æ”¹è¿›å»ºè®®å’Œæœ€ä½³å®è·µã€‚
    context:
      include_files:
        - "**/src/test/java/**/*.java"
        - "**/src/main/java/**/*.java"
      max_files: 100

  - name: "ä¾èµ–ç®¡ç†åˆ†æ"
    description: "åˆ†æé¡¹ç›®ä¾èµ–çš„åˆç†æ€§å’Œå®‰å…¨æ€§"
    prompt: |
      è¯·åˆ†æJavaé¡¹ç›®çš„ä¾èµ–ç®¡ç†ï¼š
      1. ä¾èµ–ç‰ˆæœ¬æ˜¯å¦æœ€æ–°å’Œå…¼å®¹
      2. æ˜¯å¦å­˜åœ¨ä¾èµ–å†²çª
      3. æœªä½¿ç”¨çš„ä¾èµ–è¯†åˆ«
      4. ä¾èµ–çš„å®‰å…¨æ¼æ´æ£€æŸ¥
      5. ä¾èµ–è®¸å¯è¯åˆè§„æ€§
      6. ä¾èµ–å¤§å°å’Œæ€§èƒ½å½±å“
      
      è¯·æä¾›ä¾èµ–ä¼˜åŒ–å»ºè®®ã€‚
    context:
      include_files:
        - "**/pom.xml"
        - "**/build.gradle"
        - "**/gradle.properties"
      max_files: 20

# è¾“å‡ºé…ç½®
output:
  format: "markdown"
  save_to: "java-analysis-report.md"
  include_summary: true
  include_metrics: true
  sections:
    - "é¡¹ç›®æ¦‚è§ˆ"
    - "ä»£ç è´¨é‡è¯„ä¼°"
    - "å®‰å…¨æ€§åˆ†æ"
    - "æ€§èƒ½ä¼˜åŒ–å»ºè®®"
    - "æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š"
    - "ä¾èµ–ç®¡ç†å»ºè®®"
    - "æ€»ä½“è¯„åˆ†å’Œæ”¹è¿›è®¡åˆ’"

# åˆ†æè§„åˆ™é…ç½®
rules:
  code_quality:
    - name: "å‘½åè§„èŒƒæ£€æŸ¥"
      severity: "warning"
      pattern: "^[A-Z][a-zA-Z0-9]*$"  # ç±»åè§„èŒƒ
      description: "ç±»ååº”ä½¿ç”¨å¤§é©¼å³°å‘½åæ³•"
    
    - name: "æ–¹æ³•é•¿åº¦æ£€æŸ¥"
      severity: "warning"
      threshold: 50
      description: "æ–¹æ³•è¡Œæ•°ä¸åº”è¶…è¿‡50è¡Œ"
    
    - name: "å¾ªç¯å¤æ‚åº¦æ£€æŸ¥"
      severity: "error"
      threshold: 10
      description: "æ–¹æ³•çš„å¾ªç¯å¤æ‚åº¦ä¸åº”è¶…è¿‡10"

  security:
    - name: "SQLæ³¨å…¥æ£€æŸ¥"
      severity: "error"
      patterns:
        - "Statement.*execute.*\+"
        - "createQuery.*\+"
      description: "æ£€æµ‹æ½œåœ¨çš„SQLæ³¨å…¥é£é™©"
    
    - name: "ç¡¬ç¼–ç å¯†ç æ£€æŸ¥"
      severity: "error"
      patterns:
        - "password\s*=\s*[\"'][^\"']+[\"']"
        - "pwd\s*=\s*[\"'][^\"']+[\"']"
      description: "æ£€æµ‹ç¡¬ç¼–ç çš„å¯†ç "

  performance:
    - name: "å­—ç¬¦ä¸²æ‹¼æ¥æ£€æŸ¥"
      severity: "warning"
      pattern: "String.*\+.*\+"
      description: "å»ºè®®ä½¿ç”¨StringBuilderè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥"
    
    - name: "é›†åˆåˆå§‹åŒ–æ£€æŸ¥"
      severity: "info"
      pattern: "new ArrayList\(\)"
      description: "å»ºè®®æŒ‡å®šé›†åˆçš„åˆå§‹å®¹é‡"

# æŠ¥å‘Šæ¨¡æ¿
report_template: |
  # Javaé¡¹ç›®ä»£ç åˆ†ææŠ¥å‘Š
  
  ## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ
  
  **é¡¹ç›®åç§°**: {{project_name}}
  **åˆ†ææ—¶é—´**: {{analysis_date}}
  **ä»£ç è¡Œæ•°**: {{total_lines}}
  **æ–‡ä»¶æ•°é‡**: {{file_count}}
  
  ## ğŸ¯ æ€»ä½“è¯„åˆ†
  
  | ç»´åº¦ | è¯„åˆ† | çŠ¶æ€ |
  |------|------|------|
  | ä»£ç è´¨é‡ | {{quality_score}}/100 | {{quality_status}} |
  | å®‰å…¨æ€§ | {{security_score}}/100 | {{security_status}} |
  | æ€§èƒ½ | {{performance_score}}/100 | {{performance_status}} |
  | æµ‹è¯•è¦†ç›–ç‡ | {{test_coverage}}% | {{test_status}} |
  
  ## ğŸ“‹ è¯¦ç»†åˆ†æç»“æœ
  
  {{analysis_details}}
  
  ## ğŸš€ æ”¹è¿›å»ºè®®
  
  {{improvement_suggestions}}
  
  ## ğŸ“ˆ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’
  
  {{action_plan}}

# é…ç½®å…ƒæ•°æ®
metadata:
  language: "java"
  framework_support:
    - "Spring Boot"
    - "Spring Framework"
    - "Maven"
    - "Gradle"
    - "JUnit"
    - "Mockito"
  file_extensions:
    - ".java"
    - ".xml"
    - ".gradle"
    - ".properties"
    - ".yml"
    - ".yaml"
  created_by: "AI Agent Hub"
  last_updated: "2024-01-20"
  tags:
    - "java"
    - "code-analysis"
    - "quality"
    - "security"
    - "performance"